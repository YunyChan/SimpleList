(function(i,m){var h={listenEvent:l};function l(q,s,t,r){if(i.attachEvent){q.attachEvent("on"+s,function(){var u=i.event;t&&t(u)})}else{q.addEventListener(s,t,!!r)}}var b=o;b.prototype.isBoundScroll=false;b.prototype.instances=[];b.prototype.init=f;b.prototype.initEvents=a;b.prototype.render=j;b.prototype.renderList=e;b.prototype.createItems=c;b.prototype.update=n;b.prototype.renderLoading=k;b.prototype.onScroll=g;b.prototype.show=d;b.prototype.hide=p;function o(q){this.config=q=q||{};this.target=q.target;this.isEndless=!!q.isEndless;this.item=q.item||"";this.onReachBottom=q.onReachBottom||null;this.isShowLoading=!!q.isShowLoading;this.loadingTemplate=q.loading||"";this.onNotEnoughHeight=q.onNotEnoughHeight||null;this.isShow=b.prototype.instances.length==0;this.init();return this}function f(){this.render();this.initEvents();b.prototype.instances.push(this)}function a(){var q=this;if(this.isEndless&&!this.isBoundScroll){b.prototype.isBoundScroll=true;h.listenEvent(i,"scroll",function(r){var u=b.prototype.instances;for(var s=0,t=u.length;s<t;s++){if(u[s].isShow){u[s].onScroll(r)}}})}}function j(){this.renderList();this.renderLoading()}function e(){this.wrap=m.createElement("ul");this.target.appendChild(this.wrap);this.update(this.config.data)}function c(q){var t="";for(var r=0,s=q.length;r<s;r++){var u=q[r];t+="<li>"+this.item(r,u)+"</li>"}return t}function n(q){if(q.length>0){var r=this.isEndless?this.wrap.innerHTML:"";this.wrap.innerHTML=r+this.createItems(q);this.onScroll()}}function k(){if(this.isEndless&&this.isShowLoading){this.loading=m.createElement("div");this.loading.className="simple-list-loading";if(this.loadingTemplate){this.loading.innerHTML=this.loadingTemplate}else{this.loading.innerHTML="<p>正在加载中，请稍后</p>"}this.target.appendChild(this.loading)}}function g(q){var s=m.documentElement;if(s.getBoundingClientRect().height>s.clientHeight){var u=this.target.getBoundingClientRect();var r=Math.floor(u.bottom);var t=r<=s.clientHeight;if(t&&u.height){this.onReachBottom&&this.onReachBottom()}}else{this.onNotEnoughHeight&&this.onNotEnoughHeight()}}function d(){this.isShow=true}function p(){this.isShow=false}if(typeof define==="function"&&typeof define.amd==="object"&&define.amd){define(function(){return b})}else{if(typeof module!=="undefined"&&module.exports){module.exports=function(q){return new b(q)};module.exports.SimpleList=b}else{if(!i.SimpleList){i.SimpleList=b}else{throw new Error("It's duplicate to defined 'SimpleList', please check the scripts which you has been imported!")}}}})(window,document);